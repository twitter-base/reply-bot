name: Base-Branch Check Protected [PR]
on: [pull_request, pull_request_target, pull_request_review_comment, pull_request_review]
jobs:     
  check-pr-base-branch-protected:
    runs-on: ubuntu-latest
    steps:
      - if: github.ref = '!refs/heads/main' && github.reg = '!refs/heads/main'       
        name: Base-branch check - feature - unprotected
        uses: a-b-r-o-w-n/check-base-branch-action@v1
        with:
          protectedBranches: "main, next"
          defaultBranch: "dev"
          update-branch: true
          repo-token: "${{ secrets.GITHUB_TOKEN }}"
      - if: github.ref == 'refs/heads/main'
        name: Base-branch check - main
        uses: a-b-r-o-w-n/check-base-branch-action@v1
        with:
          protectedBranches: "next"
          defaultBranch: "dev"
          update-branch: false
          repo-token: "${{ secrets.GITHUB_TOKEN }}"
      - if: github.ref == 'refs/heads/next'
        name: Base-branch check - next
        uses: a-b-r-o-w-n/check-base-branch-action@v1
        with:
          protectedBranches: "dev"
          defaultBranch: "main"
          update-branch: false
          repo-token: "${{ secrets.GITHUB_TOKEN }}"
      - if: github.ref == 'refs/heads/dev'
        name: Base-branch check - dev
        uses: a-b-r-o-w-n/check-base-branch-action@v1
        with:
          protectedBranches: "main"
          defaultBranch: "next"
          update-branch: true
          repo-token: "${{ secrets.GITHUB_TOKEN }}"
